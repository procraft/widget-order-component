(this["webpackJsonptest-widget-order-component"]=this["webpackJsonptest-widget-order-component"]||[]).push([[0],{441:function(n,e,t){"use strict";t.r(e);var r,a,i=t(124),o=t.n(i),d=t(204),s=t(205),c=t(206),u=t(207),l=t(215),m=t(216),_=(t(218),t(228),t(1)),f=t(208),p=t(209),g=t.n(p),y=t(127),b=t(217),h=t(210),v=t.n(h),w=t(123),I=t(35),O=["course_uid","tariff_uid","courses"],C=function(n){var e,t,r=n.course_uid,a=n.tariff_uid,i=n.courses,o=Object(b.a)(n,O),d=[],s=i.find((function(n){return n.uid===r}));if(!s)throw new Error("\u041d\u0435 \u0431\u044b\u043b \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u043a\u0443\u0440\u0441");var c=null===s||void 0===s||null===(e=s.tariffs)||void 0===e?void 0:e.find((function(n){return n.uid===a}));if(!c)throw new Error("\u041d\u0435 \u0431\u044b\u043b \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0442\u0430\u0440\u0438\u0444");if(null===(t=s.flows)||void 0===t||t.forEach((function(n){var e,t=null===(e=s.catalogItems)||void 0===e?void 0:e.find((function(e){var t;return(null===(t=e.course)||void 0===t?void 0:t.courseId)===s.uid&&e.course.flowId===n.uid&&e.course.tariffId===c.uid}));if(!t)return null;var r=Object(w.getCatalogItemData)(t,i);if(!r)return null;var a=r.placesLeft;d.push({id:n.id,uid:n.uid,name:n.name,price:t.unitPrice||0,oldPrice:t.unitPriceOriginal||null,catalogItem:t,course:{flow:n,tariff:c},placesLeft:a})})),d.length<1)throw new Error("\u041d\u0435 \u0431\u044b\u043b \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u043d\u0438 \u043e\u0434\u0438\u043d \u044d\u043b\u0435\u043c\u0435\u043d\u0442");return Object(I.jsx)(v.a,Object(y.a)(Object(y.a)({},o),{},{courses:i,items:d}))},j=t(213),F=t(28),k={light:{primary:"rgba(215,113,88,1)",text:"rgba(58,52,51,1)",textSecondary:"rgba(58,52,51,0.7)",background:"rgba(255,255,255,1)",backgroundVariant:"rgba(251,249,249,1)",border:"rgba(58,52,51,0.12)",borderLight:"rgba(58,52,51,0.05)"},dark:{primary:"rgba(220,120,95,1)",text:"rgba(241,233,231,1)",textSecondary:"rgba(241,233,231,0.6)",background:"rgba(0,0,0,1)",backgroundVariant:"rgba(28,26,26,1)",border:"rgba(241,233,231,0.15)",borderLight:"rgba(241,233,231,0.05)"}},P=(null===(r=window)||void 0===r?void 0:r.matchMedia)?null===(a=window.matchMedia("(prefers-color-scheme: dark)"))||void 0===a?void 0:a.matches:void 0;var A=function(n){var e=function(n){return"system"===(null===n||void 0===n?void 0:n.selected)?P?k.dark:k.light:n?k[n.selected]:k.light}({selected:"system"});return Object(I.jsx)(F.ThemeProvider,{theme:e,children:_.Children.only(n.children)})};if(new g.a("Inter",{}).load().then((function(){document.body.classList.add("fontLoaded")})),!customElements.get("widget-order")){var x=function(n){Object(u.a)(t,n);var e=Object(l.a)(t);function t(){return Object(s.a)(this,t),e.apply(this,arguments)}return Object(c.a)(t,[{key:"connectedCallback",value:function(){var n=this,e=this.getAttribute("site_url"),t=this.getAttribute("course_uid"),r=this.getAttribute("tariff_uid"),a=this.getAttribute("materials_limit")||"";if(!e)throw new Error("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 site_url");if(!t)throw new Error("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 course_uid");if(!r)throw new Error("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 tariff_uid");setTimeout((function(){fetch("".concat(e,"/api/"),{headers:{"content-type":"application/json"},method:"POST",body:JSON.stringify({query:"query courses($code: String!) {\n        courses(code: $code) {\n          ...Course_\n          __typename\n        }\n      }\n      \n      fragment Course_ on CoursePublicCustom {\n        id\n        name\n        uid\n        tariffs {\n          id\n          uid\n          name\n          courseId\n          position\n          isActive\n          flowBehaviour\n          marketingBenefits\n          __typename\n        }\n        flows {\n          ...CourseFlow_\n          __typename\n        }\n        catalogItems {\n          ...OrderCatalogItemFr\n          __typename\n        }\n        tariffPerFlowDataItems {\n          courseId\n          courseTariffId\n          flowId\n          computed {\n            capacityRemainder\n            __typename\n          }\n          priceDetails {\n            kind\n            changeByTime {\n              items {\n                priceMarketing\n                priceReal\n                startsAt\n                finishesAt\n                __typename\n              }\n              __typename\n            }\n            __typename\n          }\n          prolongation {\n            items {\n              price\n              periodInDays\n              __typename\n            }\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      \n      fragment CourseFlow_ on FlowPublicCustom {\n        id\n        uid\n        name\n        colorStyle\n        startsAt\n        finishesAt\n        kind\n        __typename\n      }\n      \n      fragment OrderCatalogItemFr on OrderCatalogItem_Fragment {\n        ...OrderCatalogItemFields\n        master {\n          id\n          uid\n          currency\n          cashPaymentAliases {\n            id\n            uid\n            name\n            __typename\n          }\n          landing {\n            id\n            cardFields {\n              name\n              state\n              __typename\n            }\n            __typename\n          }\n          __typename\n        }\n        course {\n          courseId\n          flowId\n          tariffId\n          prolongationDays\n          __typename\n        }\n        Course {\n          id\n          uid\n          name\n          __typename\n        }\n        Flow {\n          ...CourseFlow_\n          __typename\n        }\n        Tariff {\n          id\n          uid\n          name\n          __typename\n        }\n        sales {\n          ...sale\n          __typename\n        }\n        __typename\n      }\n      \n      fragment OrderCatalogItemFields on OrderCatalogItem_Fragment {\n        id\n        uid\n        name\n        title\n        unitPrice\n        unitPriceOriginal\n        promoCode(code: $code) {\n          ...OrderItemPromoCode_\n          __typename\n        }\n        priceWithPromoCode(code: $code)\n        __typename\n      }\n      \n      fragment OrderItemPromoCode_ on PromoCode_Fragment {\n        id\n        code\n        discountPercent\n        activeFrom\n        activeTill\n        isActive\n        __typename\n      }\n      \n      fragment sale on SaleCustom {\n        ...saleFields\n        benefitItems {\n          ...OrderCatalogItemFields\n          course {\n            courseId\n            flowId\n            tariffId\n            __typename\n          }\n          __typename\n        }\n        orderCondition {\n          kind\n          data {\n            __typename\n            ... on ItemOrderConditionData {\n              shouldContainAll\n              catalogItems {\n                ...OrderCatalogItemFields\n                sales {\n                  ...saleFields\n                  benefitItems {\n                    ...OrderCatalogItemFields\n                    __typename\n                  }\n                  __typename\n                }\n                __typename\n              }\n              __typename\n            }\n          }\n          __typename\n        }\n        __typename\n      }\n      \n      fragment saleFields on SaleCustom {\n        id\n        uid\n        name\n        isActive\n        benefitKind\n        benefitAmount\n        benefitUnit\n        __typename\n      }\n      ",variables:{code:""}})}).then(function(){var i=Object(d.a)(o.a.mark((function i(d){var s,c,u;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,d.json();case 2:if(c=i.sent,null===(u=null===(s=c.data)||void 0===s?void 0:s.courses)||void 0===u?void 0:u.length){i.next=6;break}throw new Error("\u041d\u0435 \u0431\u044b\u043b\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435");case 6:f.render(Object(I.jsx)(A,{children:Object(I.jsx)(j.a,{children:Object(I.jsx)(_.StrictMode,{children:Object(I.jsx)(C,{courses:u,orderLink:"".concat(e,"/order"),materialsLimit:parseInt(a)||10,course_uid:parseInt(t),tariff_uid:parseInt(r)})})})}),n);case 7:case"end":return i.stop()}}),i)})));return function(n){return i.apply(this,arguments)}}())}),100)}}]),t}(Object(m.a)(HTMLElement));customElements.define("widget-order",x)}}},[[441,1,2]]]);